{"version":3,"sources":["webpack://ledMatrix/webpack/universalModuleDefinition","webpack://ledMatrix/webpack/bootstrap","webpack://ledMatrix/./dist/esm/lib/utils/exception.js","webpack://ledMatrix/./dist/esm/lib/core/character.js","webpack://ledMatrix/./dist/esm/lib/utils/bit-array.js","webpack://ledMatrix/./dist/esm/lib/core/character-sizer.js","webpack://ledMatrix/./dist/esm/lib/utils/event.js","webpack://ledMatrix/./dist/esm/lib/core/board.js","webpack://ledMatrix/./dist/esm/lib/core/panel.js","webpack://ledMatrix/./dist/esm/lib/core/character-dictionary.js","webpack://ledMatrix/./dist/esm/lib/core/scrollers/side-scroller.js","webpack://ledMatrix/./dist/esm/lib/core/led-matrix.js","webpack://ledMatrix/./dist/esm/lib/core/scrollers/vertical-scroller.js","webpack://ledMatrix/./dist/esm/lib/core/scrollers/scroller-builder.js","webpack://ledMatrix/./dist/esm/lib/core/character-json.js","webpack://ledMatrix/./dist/esm/index.js"],"names":["Exception","throwIfNull","value","valueDescription","throwIfNegative","throwIfNotBetween","rangeFrom","rangeTo","getDescriptionForProperty","className","methodName","constructor","pattern","output","width","CLASS_NAME","Character","name","_pattern","_output","size","_width","_height","height","getColumn","index","column","i","push","atIndex","getRow","row","hasPattern","input","BitArray","values","_bitPerIndex","_size","length","_array","Uint8Array","Math","ceil","_pointer","pushAll","mask","_createMask","_matchesMask","_arrayIndex","forEach","atIndexRange","count","_arrayIndexOffset","floor","NearestNeighbor","scale","matrix","factor","ratio","h1","w2","h2","finalMatrix","Array","j","px","py","Event","handlers","on","handler","off","filter","h","trigger","data","slice","expose","params","Board","onPropertyChange","_characters","_letterSpacing","letterSpacing","padding","PropertyChange","_padding","characters","_input","paddingAndSpacingWidth","_horizontalPaddingWidth","_totalSpacingWidth","map","character","reduce","accumulator","current","_verticalPaddingWidth","letterSpacingDescription","prevLetterSpacing","_emitPropertyChangeEvent","paddingDescription","x","nextPadding","prevPadding","getColumnAtIndex","_createBitOffArrayOfLength","toReturn","some","characterColumn","concat","getRowAtIndex","charactersWithSpace","apply","load","dictionnary","escapeCharacter","delimiterWord","start","end","characterBuffer","find","prevValue","Panel","_initiated","_latestCurrentSequenceUuid","onNewSequence","_params","updateCurrentSequence","board","NewSequence","increment","reverse","scroller","widthDescription","fpsDescription","reverseDescription","GetCurrentSequence","Promise","resolve","sequence","panelIndex","loopEndIndex","generatePanelFrameAtIndex","_tickPanelIndex","currentUuid","then","_decrementIndex","_incrementIndex","CharacterDictionary","max","add","pendingCharacters","pendingPatterns","duplicatedPendingPatterns","array","indexOf","alreadyAddedPatterns","duplicatedPatterns","edit","pendingCharacter","edited","arr","delete","deleted","splice","SideScroller","currentIndex","panel","columns","panelFrame","onReady","_validateParameters","_panel","panelWidth","event","newSequence","_dictionary","Ready","addCharacters","addCharacter","editCharacter","deleteCharacter","loadedCharacters","usedCharacters","viewportWidth","defaultParams","_valueOrDefaultIfNull","defaultValue","VerticalScroller","display","ScrollerTypes","build","scrollerType","Side","Vertical","import","path","success","fetch","response","text","CharactersJSON","parse","catch","error","export","json","JSON","stringify","patterns"],"mappings":"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","file":"./src/led-matrix.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ledMatrix\"] = factory();\n\telse\n\t\troot[\"ledMatrix\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class Exception {\n    static throwIfNull(value, valueDescription) {\n        if (value == null) {\n            throw `${valueDescription} property cannot be set to null`;\n        }\n    }\n    static throwIfNegative(value, valueDescription) {\n        if (value < 0) {\n            throw `${valueDescription} property cannot be set to a negative number (${value})`;\n        }\n    }\n    static throwIfNotBetween(value, valueDescription, rangeFrom, rangeTo) {\n        if (value < rangeFrom || value > rangeTo) {\n            throw `Seek expects a value between ${rangeFrom} and ${rangeTo}`;\n        }\n    }\n    static getDescriptionForProperty(className, methodName) {\n        return `${className}'s ${methodName}`;\n    }\n}\n//# sourceMappingURL=exception.js.map","import { Exception } from \"../utils/exception\";\nexport class Character {\n    constructor(pattern, output, width) {\n        this.CLASS_NAME = Character.name;\n        this._pattern = pattern;\n        this._output = output;\n        if (output.size >= width) {\n            this._width = width;\n        }\n        else {\n            throw `Output size (${output.size}) can't be smaller than the character's width (${width})`;\n        }\n        if (output.size % width === 0) {\n            this._height = output.size / width;\n        }\n        else {\n            throw `Output size (${output.size}) must be divisible by the character's width (${width})`;\n        }\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    get pattern() {\n        return this._pattern;\n    }\n    get output() {\n        return this._output;\n    }\n    getColumn(index) {\n        Exception.throwIfNotBetween(index, Exception.getDescriptionForProperty(this.CLASS_NAME, 'getColumn'), 0, this._width - 1);\n        let column = [];\n        for (let i = 0; i < this._height; i++) {\n            column.push(this._output.atIndex(i * this._width + index));\n        }\n        return column;\n    }\n    getRow(index) {\n        Exception.throwIfNotBetween(index, Exception.getDescriptionForProperty(this.CLASS_NAME, 'getRow'), 0, this._height - 1);\n        let row = [];\n        for (let i = 0; i < this._width; i++) {\n            row.push(this._output.atIndex(index * this._width + i));\n        }\n        return row;\n    }\n    hasPattern(input) {\n        return this._pattern == input;\n    }\n}\n;\n//# sourceMappingURL=character.js.map","export class BitArray {\n    constructor(values) {\n        this._bitPerIndex = 8;\n        this._size = values.length;\n        this._array = new Uint8Array(Math.ceil(this._size / this._bitPerIndex));\n        this._pointer = 0;\n        this.pushAll(values);\n    }\n    get size() {\n        return this._size;\n    }\n    push(value) {\n        if (this._pointer == this._size) {\n            throw `Bit array max size reached (${this._size})`;\n        }\n        const mask = this._createMask(this._pointer);\n        if (this._matchesMask(mask, this._array[this._arrayIndex(this._pointer)])) {\n            if (value === 0) {\n                this._array[this._arrayIndex(this._pointer)] ^= mask;\n            }\n        }\n        else {\n            if (value === 1) {\n                this._array[this._arrayIndex(this._pointer)] ^= mask;\n            }\n        }\n        this._pointer++;\n    }\n    pushAll(values) {\n        values.forEach((value) => {\n            this.push(value);\n        });\n    }\n    atIndex(index) {\n        if (index > this._size) {\n            throw `Index (${index}) exceeds the size of the bit array (${this._size})`;\n        }\n        const mask = this._createMask(index);\n        return this._matchesMask(mask, this._array[this._arrayIndex(index)]) ? 1 : 0;\n    }\n    atIndexRange(index, count) {\n        if (index + count - 1 > this._size) {\n            throw `Index (${index}) exceeds the size of the bit array (${this._size})`;\n        }\n        const values = [];\n        for (let i = 0; i < count; i++) {\n            const mask = this._createMask(index + i);\n            values.push(this._matchesMask(mask, this._array[this._arrayIndex(index + i)]) ? 1 : 0);\n        }\n        return values;\n    }\n    _matchesMask(mask, value) {\n        return (mask & value) != 0;\n    }\n    _createMask(index) {\n        return 1 << (this._bitPerIndex - 1) - this._arrayIndexOffset(index);\n    }\n    _arrayIndex(index) {\n        return Math.floor(index / this._bitPerIndex);\n    }\n    _arrayIndexOffset(index) {\n        return index % this._bitPerIndex;\n    }\n}\n;\n//# sourceMappingURL=bit-array.js.map","export class NearestNeighbor {\n    static scale(matrix, width, factor) {\n        const ratio = 1 / factor;\n        const h1 = matrix.length / width;\n        const w2 = width * factor;\n        const h2 = h1 * factor;\n        let finalMatrix = new Array(w2 * h2);\n        for (let i = 0; i < h2; i++) {\n            for (let j = 0; j < w2; j++) {\n                const px = Math.floor(j * ratio);\n                const py = Math.floor(i * ratio);\n                finalMatrix[(i * w2) + j] = matrix[(py * width) + px];\n            }\n        }\n        return finalMatrix;\n    }\n}\n//# sourceMappingURL=character-sizer.js.map","export class Event {\n    constructor() {\n        this.handlers = [];\n    }\n    on(handler) {\n        this.handlers.push(handler);\n    }\n    off(handler) {\n        this.handlers = this.handlers.filter(h => h !== handler);\n    }\n    trigger(data) {\n        this.handlers.slice(0).forEach(h => h(data));\n    }\n    expose() {\n        return this;\n    }\n}\n//# sourceMappingURL=event.js.map","import { Character } from './character';\nimport { BitArray } from '../utils/bit-array';\nimport { NearestNeighbor } from \"./character-sizer\";\nimport { Event } from '../utils/event';\nimport { Exception } from '../utils/exception';\nexport class Board {\n    constructor(params) {\n        this.CLASS_NAME = Board.name;\n        this.onPropertyChange = new Event();\n        this._characters = [];\n        this._letterSpacing = params.letterSpacing;\n        this.padding = params.padding;\n        this._size = params.size;\n        this.onPropertyChange.trigger();\n    }\n    get PropertyChange() { return this.onPropertyChange.expose(); }\n    get letterSpacing() {\n        return this._letterSpacing;\n    }\n    get padding() {\n        return this._padding;\n    }\n    get characters() {\n        return this._characters;\n    }\n    get input() {\n        return this._input;\n    }\n    get size() {\n        return this._size;\n    }\n    get width() {\n        const paddingAndSpacingWidth = this._horizontalPaddingWidth() + this._totalSpacingWidth();\n        if (this._characters.length > 0) {\n            return paddingAndSpacingWidth + this._characters\n                .map(character => character.width)\n                .reduce((accumulator, current) => accumulator + current);\n        }\n        else {\n            return paddingAndSpacingWidth;\n        }\n    }\n    get height() {\n        if (this._characters.length > 0) {\n            return this._verticalPaddingWidth() +\n                this._characters\n                    .reduce((accumulator, current) => current.height > accumulator.height ? current : accumulator).height;\n        }\n        else {\n            return this._verticalPaddingWidth();\n        }\n    }\n    set letterSpacing(value) {\n        const letterSpacingDescription = Exception.getDescriptionForProperty(this.CLASS_NAME, 'padding');\n        Exception.throwIfNull(value, letterSpacingDescription);\n        Exception.throwIfNegative(value, letterSpacingDescription);\n        const prevLetterSpacing = this._letterSpacing;\n        this._letterSpacing = value;\n        this._emitPropertyChangeEvent(value, prevLetterSpacing);\n    }\n    set padding(value) {\n        const paddingDescription = Exception.getDescriptionForProperty(this.CLASS_NAME, 'padding');\n        value.forEach(x => {\n            Exception.throwIfNull(x, paddingDescription);\n            Exception.throwIfNegative(x, paddingDescription);\n        });\n        const nextPadding = value.length == 1 ?\n            [value[0], value[0], value[0], value[0]] :\n            value.length == 2 ?\n                [value[0], value[1], value[0], value[1]] :\n                value;\n        if (this._padding) {\n            let prevPadding = [...this._padding];\n            this._padding = [nextPadding[0], nextPadding[1], nextPadding[2], nextPadding[3]];\n            if (this._padding[0] != prevPadding[0] ||\n                this._padding[1] != prevPadding[1] ||\n                this._padding[2] != prevPadding[2] ||\n                this._padding[3] != prevPadding[3]) {\n                this.onPropertyChange.trigger();\n            }\n        }\n        else {\n            this._padding = [nextPadding[0], nextPadding[1], nextPadding[2], nextPadding[3]];\n            this.onPropertyChange.trigger();\n        }\n    }\n    getColumnAtIndex(index) {\n        index %= this.width;\n        if (index < this._padding[3] || index >= this.width - this._padding[1]) {\n            return this._createBitOffArrayOfLength(this.height);\n        }\n        let accumulator = this._padding[3];\n        let toReturn;\n        this._characters.some((character) => {\n            accumulator += character.width;\n            if (accumulator > index) {\n                const characterColumn = character.getColumn(index - (accumulator - character.width));\n                toReturn = this._createBitOffArrayOfLength(this._padding[0])\n                    .concat(characterColumn)\n                    .concat(this._createBitOffArrayOfLength(this._padding[2]));\n                if (toReturn.length < this.height) {\n                    toReturn.concat(this._createBitOffArrayOfLength(this.height - characterColumn.length));\n                }\n                return true;\n            }\n            accumulator += this._letterSpacing;\n            if (accumulator > index) {\n                toReturn = this._createBitOffArrayOfLength(this.height);\n                return true;\n            }\n        });\n        return toReturn;\n    }\n    getRowAtIndex(index) {\n        index %= this.height;\n        if (index < this._padding[0] || index >= this.height - this._padding[2]) {\n            return this._createBitOffArrayOfLength(this.width);\n        }\n        let charactersWithSpace = [].concat.apply([], this._characters.map(x => x.getRow(index - this._padding[0]).concat(this._createBitOffArrayOfLength(this._letterSpacing))));\n        charactersWithSpace = charactersWithSpace.slice(0, charactersWithSpace.length - this._letterSpacing);\n        return this._createBitOffArrayOfLength(this._padding[3])\n            .concat(charactersWithSpace)\n            .concat(this._createBitOffArrayOfLength(this._padding[1]));\n    }\n    load(input, dictionnary, size = 1) {\n        const escapeCharacter = '\\\\';\n        const delimiterWord = {\n            start: \"(\",\n            end: \")\"\n        };\n        this._characters = [];\n        this._size = size;\n        for (let i = 0; i < input.length; i++) {\n            let characterBuffer = input[i];\n            if (characterBuffer === escapeCharacter) {\n                if (i == input.length - 1) {\n                    throw `No character escaped at the end of the string input`;\n                }\n                characterBuffer = input[++i];\n            }\n            else if (characterBuffer === delimiterWord.start && (i === 0 || input[i - 1] !== escapeCharacter)) {\n                do {\n                    characterBuffer += input[++i];\n                    if (i == input.length) {\n                        throw `Could not find the ending delimiter \"${delimiterWord.end}\" for pattern ${characterBuffer}`;\n                    }\n                } while (input[i] != delimiterWord.end);\n                characterBuffer = characterBuffer.slice(1, -1);\n            }\n            const character = dictionnary.find(characterBuffer);\n            this._characters.push(new Character(character.pattern, new BitArray(NearestNeighbor.scale(character.output.atIndexRange(0, character.output.size), character.width, this._size)), character.width * this._size));\n        }\n        this._input = input;\n        this.onPropertyChange.trigger();\n    }\n    _horizontalPaddingWidth() {\n        return this._padding[1] + this._padding[3];\n    }\n    _totalSpacingWidth() {\n        return (this._characters.length - 1) * this._letterSpacing;\n    }\n    _verticalPaddingWidth() {\n        return this._padding[0] + this._padding[2];\n    }\n    _createBitOffArrayOfLength(length) {\n        return Array.apply(null, Array(length)).map(() => 0);\n    }\n    _emitPropertyChangeEvent(value, prevValue) {\n        if (value != prevValue) {\n            this.onPropertyChange.trigger();\n        }\n    }\n}\n;\n//# sourceMappingURL=board.js.map","import { Exception } from '../utils/exception';\nimport { Event } from '../utils/event';\nexport class Panel {\n    constructor(params) {\n        this.CLASS_NAME = Panel.name;\n        this._initiated = false;\n        this._latestCurrentSequenceUuid = 0;\n        this.onNewSequence = new Event();\n        this._params = params;\n        this._initiated = true;\n        this.updateCurrentSequence();\n        this._params.board.PropertyChange.on(() => {\n            this.updateCurrentSequence();\n        });\n    }\n    get NewSequence() { return this.onNewSequence.expose(); }\n    get width() {\n        return this._params.width;\n    }\n    get board() {\n        return this._params.board;\n    }\n    get increment() {\n        return this._params.increment;\n    }\n    get reverse() {\n        return this._params.reverse;\n    }\n    get scroller() {\n        return this._params.scroller;\n    }\n    set width(value) {\n        const widthDescription = Exception.getDescriptionForProperty(this.CLASS_NAME, 'width');\n        Exception.throwIfNull(value, widthDescription);\n        Exception.throwIfNegative(value, widthDescription);\n        if (this._params.width != value) {\n            this._params.width = value;\n            this.updateCurrentSequence();\n        }\n    }\n    set board(value) {\n        Exception.throwIfNull(value, Exception.getDescriptionForProperty(this.CLASS_NAME, 'board'));\n        if (this._params.board != value) {\n            this._params.board = value;\n            this.updateCurrentSequence();\n        }\n    }\n    set increment(value) {\n        const fpsDescription = Exception.getDescriptionForProperty(this.CLASS_NAME, 'fps');\n        Exception.throwIfNull(value, fpsDescription);\n        Exception.throwIfNegative(value, fpsDescription);\n        if (this._params.increment != value) {\n            this._params.increment = value;\n            this.updateCurrentSequence();\n        }\n    }\n    set reverse(value) {\n        const reverseDescription = Exception.getDescriptionForProperty(this.CLASS_NAME, 'reverse');\n        Exception.throwIfNull(value, reverseDescription);\n        if (value != this._params.reverse) {\n            this._params.reverse = value;\n            this.updateCurrentSequence();\n        }\n    }\n    set scroller(value) {\n        const reverseDescription = Exception.getDescriptionForProperty(this.CLASS_NAME, 'reverse');\n        Exception.throwIfNull(value, reverseDescription);\n        if (value != this._params.scroller) {\n            this._params.scroller = value;\n            this.updateCurrentSequence();\n        }\n    }\n    GetCurrentSequence() {\n        return new Promise((resolve) => {\n            let sequence = [];\n            let panelIndex = 0;\n            for (let i = 0; i <= this._params.scroller.loopEndIndex(this); i++) {\n                sequence.push(this._params.scroller.generatePanelFrameAtIndex(panelIndex, this));\n                panelIndex = this._tickPanelIndex(panelIndex);\n            }\n            resolve(sequence);\n        });\n    }\n    updateCurrentSequence() {\n        if (this._initiated) {\n            this._latestCurrentSequenceUuid += 1;\n            const currentUuid = this._latestCurrentSequenceUuid;\n            this.GetCurrentSequence().then((sequence) => {\n                if (currentUuid == this._latestCurrentSequenceUuid && sequence[0].length > 0) {\n                    this.onNewSequence.trigger(sequence);\n                }\n            });\n        }\n    }\n    _tickPanelIndex(index) {\n        return this._params.reverse ? this._decrementIndex(index) : this._incrementIndex(index);\n    }\n    _incrementIndex(index) {\n        return index >= this._params.scroller.loopEndIndex(this) ? 0 : index + this._params.increment;\n    }\n    _decrementIndex(index) {\n        return index === 0 ? this._params.scroller.loopEndIndex(this) : index - this._params.increment;\n    }\n}\n;\n//# sourceMappingURL=panel.js.map","export class CharacterDictionary {\n    constructor() {\n        this._characters = [];\n    }\n    get characters() {\n        return this._characters;\n    }\n    get height() {\n        return Math.max.apply(Math, this._characters.map(x => x.height));\n    }\n    get length() {\n        return this._characters.length;\n    }\n    find(input) {\n        const character = this._characters.filter(x => x.hasPattern(input));\n        if (character && character.length > 0) {\n            return character[0];\n        }\n        throw `Could not find character ${input} in the alphabet`;\n    }\n    add(pendingCharacters) {\n        const pendingPatterns = pendingCharacters.map(x => x.pattern);\n        const duplicatedPendingPatterns = pendingPatterns.filter((value, index, array) => {\n            return array.indexOf(value) != index;\n        });\n        if (duplicatedPendingPatterns.length > 0) {\n            throw `Pattern already used by another pending character`;\n        }\n        if (this._characters.length > 0) {\n            const alreadyAddedPatterns = this._characters.map(x => x.pattern);\n            const duplicatedPatterns = alreadyAddedPatterns.filter((value) => {\n                return pendingPatterns.indexOf(value) != -1;\n            });\n            if (duplicatedPatterns.length > 0) {\n                throw `Pattern already used by another character`;\n            }\n        }\n        this._characters.push(...pendingCharacters);\n    }\n    edit(pendingCharacter) {\n        let edited = false;\n        this._characters.forEach((character, index, arr) => {\n            if (character.pattern == pendingCharacter.pattern && !edited) {\n                arr[index] = pendingCharacter;\n                edited = true;\n            }\n        });\n        if (!edited) {\n            throw `Could not find character ${pendingCharacter.pattern} in the alphabet. Aborted edit operation`;\n        }\n    }\n    delete(pendingCharacter) {\n        let deleted = false;\n        this._characters.forEach((character, index, arr) => {\n            if (character.pattern == pendingCharacter.pattern && !deleted) {\n                arr.splice(index, 1);\n                deleted = true;\n            }\n        });\n        if (!deleted) {\n            throw `Could not find character ${pendingCharacter.pattern} in the alphabet. Aborted delete operation`;\n        }\n    }\n}\n;\n//# sourceMappingURL=character-dictionary.js.map","export class SideScroller {\n    loopEndIndex(params) {\n        return params.board.width - 1;\n    }\n    generatePanelFrameAtIndex(currentIndex, panel) {\n        let columns = [];\n        for (let i = 0; i < panel.width; i++) {\n            columns.push(panel.board.getColumnAtIndex(currentIndex + i));\n        }\n        let panelFrame = [];\n        for (let i = 0; i < columns[0].length; i++) {\n            panelFrame.push(columns.map(x => x[i]));\n        }\n        return panelFrame;\n    }\n}\n//# sourceMappingURL=side-scroller.js.map","import { Board } from \"./board\";\nimport { Panel } from \"./panel\";\nimport { Event } from \"../utils/event\";\nimport { CharacterDictionary } from \"./character-dictionary\";\nimport { SideScroller } from \"./scrollers/side-scroller\";\nexport class LedMatrix {\n    constructor(params) {\n        this.onReady = new Event();\n        this._params = this._validateParameters(params);\n        this._panel = new Panel({\n            board: new Board({\n                letterSpacing: this._params.letterSpacing,\n                padding: this._params.padding,\n                size: this._params.size\n            }),\n            increment: this._params.increment,\n            reverse: this._params.reverse,\n            width: this._params.panelWidth,\n            scroller: this._params.scroller\n        });\n        this.event = {\n            newSequence: this._panel.NewSequence\n        };\n        this._dictionary = new CharacterDictionary();\n    }\n    get Ready() { return this.onReady.expose(); }\n    get size() {\n        return this._size;\n    }\n    set size(value) {\n        this._size = value;\n        this._panel.board.load(this.input, this._dictionary, this.size);\n        this._panel.GetCurrentSequence();\n    }\n    get loopEndIndex() {\n        return this._panel.scroller.loopEndIndex(this._panel);\n    }\n    addCharacters(characters) {\n        this._dictionary.add(characters);\n    }\n    addCharacter(character) {\n        this._dictionary.add([character]);\n    }\n    editCharacter(character) {\n        this._dictionary.edit(character);\n    }\n    deleteCharacter(character) {\n        this._dictionary.delete(character);\n    }\n    get loadedCharacters() {\n        return this._dictionary.characters;\n    }\n    get usedCharacters() {\n        return this._panel.board.characters;\n    }\n    set letterSpacing(value) {\n        this._panel.board.letterSpacing = value;\n    }\n    get letterSpacing() {\n        return this._panel.board.letterSpacing;\n    }\n    set padding(value) {\n        this._panel.board.padding = value;\n    }\n    get padding() {\n        return this._panel.board.padding;\n    }\n    get width() {\n        return this._panel.board.width;\n    }\n    get height() {\n        return this._panel.board.height;\n    }\n    set input(value) {\n        this._panel.board.load(value, this._dictionary);\n    }\n    get input() {\n        return this._panel.board.input;\n    }\n    get sequence() {\n        return this._panel.GetCurrentSequence();\n    }\n    set scroller(value) {\n        this._panel.scroller = value;\n    }\n    get scroller() {\n        return this._panel.scroller;\n    }\n    get reverse() {\n        return this._panel.reverse;\n    }\n    set increment(value) {\n        this._panel.increment = value;\n    }\n    get increment() {\n        return this._panel.increment;\n    }\n    set reverse(value) {\n        this._panel.reverse = value;\n    }\n    set viewportWidth(value) {\n        this._panel.width = value;\n    }\n    get viewportWidth() {\n        return this._panel.width;\n    }\n    _validateParameters(params) {\n        let defaultParams = {\n            increment: 1,\n            scroller: new SideScroller(),\n            reverse: false,\n            panelWidth: 80,\n            letterSpacing: 2,\n            padding: [0, 4],\n            size: 1\n        };\n        if (params) {\n            params.letterSpacing = this._valueOrDefaultIfNull(params.letterSpacing, defaultParams.letterSpacing);\n            params.padding = this._valueOrDefaultIfNull(params.padding, defaultParams.padding);\n            params.size = this._valueOrDefaultIfNull(params.size, defaultParams.size);\n            params.increment = this._valueOrDefaultIfNull(params.increment, defaultParams.increment);\n            params.scroller = this._valueOrDefaultIfNull(params.scroller, defaultParams.scroller);\n            params.reverse = this._valueOrDefaultIfNull(params.reverse, defaultParams.reverse);\n            params.panelWidth = this._valueOrDefaultIfNull(params.panelWidth, defaultParams.panelWidth);\n            return params;\n        }\n        return defaultParams;\n    }\n    _valueOrDefaultIfNull(value, defaultValue) {\n        return value == null ? defaultValue : value;\n    }\n}\n//# sourceMappingURL=led-matrix.js.map","export class VerticalScroller {\n    loopEndIndex(panel) {\n        return panel.board.height - 1;\n    }\n    generatePanelFrameAtIndex(currentIndex, panel) {\n        let display = [];\n        for (let i = 0; i < panel.board.height; i++) {\n            let row;\n            row = panel.board.getRowAtIndex(currentIndex + i);\n            display.push(row.slice(0, panel.width));\n        }\n        return display;\n    }\n}\n//# sourceMappingURL=vertical-scroller.js.map","import { SideScroller } from \"./side-scroller\";\nimport { VerticalScroller } from \"./vertical-scroller\";\nexport var ScrollerTypes;\n(function (ScrollerTypes) {\n    ScrollerTypes[ScrollerTypes[\"Side\"] = 0] = \"Side\";\n    ScrollerTypes[ScrollerTypes[\"Vertical\"] = 1] = \"Vertical\";\n})(ScrollerTypes || (ScrollerTypes = {}));\nexport class ScrollerBuilder {\n    static build(scrollerType) {\n        switch (scrollerType) {\n            case ScrollerTypes.Side:\n                return new SideScroller();\n            case ScrollerTypes.Vertical:\n                return new VerticalScroller();\n        }\n    }\n}\n//# sourceMappingURL=scroller-builder.js.map","import { Character } from \"./character\";\nimport { BitArray } from \"../utils/bit-array\";\nexport class CharactersJSON {\n    static import(path, success) {\n        fetch(path)\n            .then((response) => {\n            return response.text();\n        })\n            .then((response) => {\n            success(CharactersJSON.parse(response));\n        })\n            .catch((error) => {\n            throw `Couldn't fetch file: ${path}`;\n        });\n    }\n    static export() {\n    }\n    static parse(json) {\n        const data = JSON.parse(json);\n        if (data == null) {\n            throw 'Invalid character json file';\n        }\n        if (data.characters == null) {\n            throw 'Invalid character json file: Can\\'t find property characters';\n        }\n        return data.characters.map(x => {\n            if (x.pattern == null) {\n                throw 'Invalid character json file: Can\\'t find property patterns for a character';\n            }\n            if (x.output == null) {\n                throw 'Invalid character json file: Can\\'t find property output for a character';\n            }\n            if (x.width == null) {\n                throw 'Invalid character json file: Can\\'t find property width for a character';\n            }\n            return new Character(x.pattern, new BitArray(x.output.map(x => x)), x.width);\n        });\n    }\n    static stringify(characters) {\n        if (characters == null || characters.length == 0) {\n            return JSON.stringify(\"\");\n        }\n        return JSON.stringify({\n            characters: characters.map(x => {\n                return {\n                    patterns: x.pattern,\n                    output: x.output.atIndexRange(0, x.output.size),\n                    width: x.width\n                };\n            })\n        });\n    }\n}\n//# sourceMappingURL=character-json.js.map","export * from './lib/core/led-matrix';\nexport * from './lib/core/scrollers/scroller-builder';\nexport * from './lib/core/scrollers/side-scroller';\nexport * from './lib/core/scrollers/vertical-scroller';\nexport * from './lib/core/board';\nexport * from './lib/core/character-dictionary';\nexport * from './lib/core/character-json';\nexport * from './lib/core/character-sizer';\nexport * from './lib/core/character';\nexport * from './lib/core/panel';\nexport * from './lib/utils/bit-array';\nexport * from './lib/utils/event';\nexport * from './lib/utils/exception';\n//# sourceMappingURL=index.js.map"],"sourceRoot":""}