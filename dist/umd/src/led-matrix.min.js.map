{"version":3,"sources":["webpack://ledMatrix/webpack/universalModuleDefinition","webpack://ledMatrix/webpack/bootstrap","webpack://ledMatrix/./dist/esm/lib/bit-array.js","webpack://ledMatrix/./dist/esm/lib/board.js","webpack://ledMatrix/./dist/esm/lib/character.js","webpack://ledMatrix/./dist/esm/lib/character-dictionary.js","webpack://ledMatrix/./dist/esm/lib/character-sizer.js","webpack://ledMatrix/./dist/esm/lib/character-json.js","webpack://ledMatrix/./dist/esm/lib/event.js","webpack://ledMatrix/./dist/esm/lib/panel.js","webpack://ledMatrix/./dist/esm/lib/panels/side-scrolling-panel.js","webpack://ledMatrix/./dist/esm/lib/panels/vertical-scrolling-panel.js","webpack://ledMatrix/./dist/esm/lib/panel-builder.js","webpack://ledMatrix/./dist/esm/lib/rendering/canva-renderers.js","webpack://ledMatrix/./dist/esm/lib/rendering/renderer.js","webpack://ledMatrix/./dist/esm/lib/rendering/ascii-renderer.js","webpack://ledMatrix/./dist/esm/lib/led-matrix.js","webpack://ledMatrix/./dist/esm/lib/rendering/canva-renderer.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","BitArray","constructor","values","_bitPerIndex","_size","length","_array","Uint8Array","Math","ceil","_pointer","pushAll","size","push","mask","_createMask","_matchesMask","_arrayIndex","forEach","atIndex","index","atIndexRange","count","_arrayIndexOffset","floor","Board","params","_characters","spacing","padding","_spacing","input","_input","x","_padding","width","_horizontalPaddingWidth","_totalSpacingWidth","map","character","reduce","accumulator","current","height","_verticalPaddingWidth","getColumnAtIndex","_emptyArrayOfLength","toReturn","some","characterColumn","getColumn","concat","getRowAtIndex","charactersWithSpace","apply","getRow","slice","load","dictionnary","characterBuffer","find","Array","Character","patterns","output","_patterns","_output","_width","_height","column","row","hasPattern","indexOf","CharacterDictionary","filter","max","add","pendingCharacters","pendingPatterns","duplicatedPendingPatterns","array","join","duplicatedPatterns","NearestNeighbor","[object Object]","matrix","factor","ratio","w2","h2","finalMatrix","j","px","py","character_json_CharactersJSON","path","success","fetch","then","response","text","parse","catch","error","json","data","JSON","characters","characterRaw","scale","stringify","Event","handlers","on","handler","off","h","trigger","expose","panel_Panel","onPanelUpdate","onReachingBoundary","fps","_board","board","_increment","increment","display","_renderer","renderer","_reverse","reverse","PanelUpdate","ReachingBoundary","_fps","_fpsInterval","play","_draw","_startLoop","stop","_shouldUpdate","resume","pause","seek","frame","indexUpperBound","tick","_step","_tickIndex","_resetPanel","_generateDisplay","render","_decrementIndex","_incrementIndex","splice","Number","valueOf","_then","Date","now","_startTime","_loop","requestAnimationFrame","bind","_onNextFrame","callback","_now","_elapsed","side_scrolling_panel_SideScrollingPanel","super","currentIndex","vertical_scrolling_panel_VerticalScrollingPanel","panel_builder_PanelType","canva_renderers_CanvaRenderers","PanelType","panel_builder_PanelBuilder","panelType","SideScrollingPanel","VerticalScrollingPanel","Renderer","ascii_renderer_AsciiRenderer","parameters","_parameters","element","characterBitOn","characterBitOff","innerHTML","led_matrix_LedMatrix","onReady","_params","_validateParameters","_panelType","_panel","build","panelWidth","event","panelUpdate","reachingBoundary","ready","Ready","init","import","pathCharacters","_dictionary","viewportWidth","defaultParams","document","getElementById","_valueOrDefault","defaultValue","canva_renderer_CanvaRenderer","canva","colorBitOn","colorBitOff","colorStrokeOn","colorStrokeOff","ctx","getContext","clearRect","widthEachBit","heightEachBit","lineWidth","renderBitsOfValue","fillColor","strokeColor","strokeStyle","fillStyle","beginPath","moveToNextBit","drawBit","fill","stroke","CanvaRenderers","Ellipse","w","moveTo","radW","radH","ellipse","PI","Rect","context","rect"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,IACA,mBAAAG,eAAAC,IACAD,UAAAH,GACA,iBAAAC,QACAA,QAAA,UAAAD,IAEAD,EAAA,UAAAC,IARA,CASCK,KAAA,WACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAP,QAGA,IAAAC,EAAAI,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAT,YAUA,OANAU,EAAAH,GAAAI,KAAAV,EAAAD,QAAAC,IAAAD,QAAAM,GAGAL,EAAAQ,GAAA,EAGAR,EAAAD,QA2CA,OAtCAM,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAd,EAAAe,EAAAC,GACAV,EAAAW,EAAAjB,EAAAe,IACAG,OAAAC,eAAAnB,EAAAe,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAV,EAAAiB,EAAA,SAAAvB,GACAkB,OAAAC,eAAAnB,EAAA,cAAiDwB,OAAA,KAIjDlB,EAAAmB,EAAA,SAAAxB,GACA,IAAAe,EAAAf,KAAAyB,WACA,WAA2B,OAAAzB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAK,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAU,EAAAC,GAAsD,OAAAV,OAAAW,UAAAC,eAAAnB,KAAAgB,EAAAC,IAGtDtB,EAAAyB,EAAA,GAIAzB,IAAA0B,EAAA,+CCnEaC,EACTC,YAAYC,GACR/B,KAAKgC,aAAe,EACpBhC,KAAKiC,MAAQF,EAAOG,OACpBlC,KAAKmC,OAAS,IAAIC,WAAWC,KAAKC,KAAKtC,KAAKiC,MAAQjC,KAAKgC,eACzDhC,KAAKuC,SAAW,EAChBvC,KAAKwC,QAAQT,GAEjBU,WACI,OAAOzC,KAAKiC,MAEhBS,KAAKtB,GACD,GAAIpB,KAAKuC,UAAYvC,KAAKiC,MACtB,oCAAqCjC,KAAKiC,SAE9C,MAAMU,EAAO3C,KAAK4C,YAAY5C,KAAKuC,UAC/BvC,KAAK6C,aAAaF,EAAM3C,KAAKmC,OAAOnC,KAAK8C,YAAY9C,KAAKuC,YAC5C,IAAVnB,IACApB,KAAKmC,OAAOnC,KAAK8C,YAAY9C,KAAKuC,YAAcI,GAItC,IAAVvB,IACApB,KAAKmC,OAAOnC,KAAK8C,YAAY9C,KAAKuC,YAAcI,GAGxD3C,KAAKuC,WAETC,QAAQT,GACJA,EAAOgB,QAAS3B,IACZpB,KAAK0C,KAAKtB,KAGlB4B,QAAQC,GACJ,GAAIA,EAAQjD,KAAKiC,MACb,eAAgBgB,yCAA6CjD,KAAKiC,SAEtE,MAAMU,EAAO3C,KAAK4C,YAAYK,GAC9B,OAAOjD,KAAK6C,aAAaF,EAAM3C,KAAKmC,OAAOnC,KAAK8C,YAAYG,KAAW,EAAI,EAE/EC,aAAaD,EAAOE,GAChB,GAAIF,EAAQE,EAAQ,EAAInD,KAAKiC,MACzB,eAAgBgB,yCAA6CjD,KAAKiC,SAEtE,MAAMF,KACN,IAAK,IAAI3B,EAAI,EAAGA,EAAI+C,EAAO/C,IAAK,CAC5B,MAAMuC,EAAO3C,KAAK4C,YAAYK,EAAQ7C,GACtC2B,EAAOW,KAAK1C,KAAK6C,aAAaF,EAAM3C,KAAKmC,OAAOnC,KAAK8C,YAAYG,EAAQ7C,KAAO,EAAI,GAExF,OAAO2B,EAEXc,aAAaF,EAAMvB,GACf,OAAyB,IAAjBuB,EAAOvB,GAEnBwB,YAAYK,GACR,OAAO,GAAMjD,KAAKgC,aAAe,EAAKhC,KAAKoD,kBAAkBH,GAEjEH,YAAYG,GACR,OAAOZ,KAAKgB,MAAMJ,EAAQjD,KAAKgC,cAEnCoB,kBAAkBH,GACd,OAAOA,EAAQjD,KAAKgC,oBC7DfsB,EACTxB,YAAYyB,GACRvD,KAAKwD,eACLxD,KAAKyD,QAAUF,EAAOE,QACtBzD,KAAK0D,QAAUH,EAAOG,QAE1BD,YAAYrC,GACR,GAAa,MAATA,EACA,KAAO,wCAEX,GAAIA,EAAQ,EACR,4DAA6DA,KAEjEpB,KAAK2D,SAAWvC,EAEpBqC,cACI,OAAOzD,KAAK2D,SAEhBC,YACI,OAAO5D,KAAK6D,OAEhBH,YAAYtC,GACRA,EAAM2B,QAAQe,IACV,GAAS,MAALA,EACA,KAAO,qCAEX,GAAIA,EAAI,EACJ,4DAA6D1C,OAGjD,GAAhBA,EAAMc,OACNlC,KAAK+D,UAAY3C,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAIA,EAAM,IAEhC,GAAhBA,EAAMc,OACXlC,KAAK+D,UAAY3C,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAIA,EAAM,IAGrDpB,KAAK+D,SAAW3C,EAGxBsC,cACI,OAAO1D,KAAK+D,SAEhBC,YACI,OAAOhE,KAAKiE,0BACRjE,KAAKkE,qBACLlE,KAAKwD,YACAW,IAAIC,GAAaA,EAAUJ,OAC3BK,OAAO,CAACC,EAAaC,IAAYD,EAAcC,GAE5DC,aACI,OAAOxE,KAAKyE,wBACRzE,KAAKwD,YACAa,OAAO,CAACC,EAAaC,IAAYA,EAAQC,OAASF,EAAYE,OAASD,EAAUD,GAAaE,OAE3GE,iBAAiBzB,GAEb,IADAA,GAASjD,KAAKgE,OACFhE,KAAK+D,SAAS,IAAMd,GAASjD,KAAKgE,MAAQhE,KAAK+D,SAAS,GAChE,OAAO/D,KAAK2E,oBAAoB3E,KAAKwE,QAEzC,IACII,EADAN,EAActE,KAAK+D,SAAS,GAiBhC,OAfA/D,KAAKwD,YAAYqB,KAAMT,IAEnB,IADAE,GAAeF,EAAUJ,OACPf,EAAO,CACrB,MAAM6B,EAAkBV,EAAUW,UAAU9B,GAASqB,EAAcF,EAAUJ,QAI7E,OAHAY,EAAW5E,KAAK2E,oBAAoB3E,KAAK+D,SAAS,IAC7CiB,OAAOF,GACPE,OAAOhF,KAAK2E,oBAAoB3E,KAAK+D,SAAS,MAC5C,EAGX,IADAO,GAAetE,KAAK2D,UACFV,EAEd,OADA2B,EAAW5E,KAAK2E,oBAAoB3E,KAAKwE,SAClC,IAGRI,EAEXK,cAAchC,GAEV,IADAA,GAASjD,KAAKwE,QACFxE,KAAK+D,SAAS,IAAMd,GAASjD,KAAKwE,OAASxE,KAAK+D,SAAS,GACjE,OAAO/D,KAAK2E,oBAAoB3E,KAAKgE,OAEzC,IAAIkB,KAAyBF,OAAOG,SAAUnF,KAAKwD,YAAYW,IAAIL,GAAKA,EAAEsB,OAAOnC,EAAQjD,KAAK+D,SAAS,IAAIiB,OAAOhF,KAAK2E,oBAAoB3E,KAAK2D,aAEhJ,OADAuB,EAAsBA,EAAoBG,MAAM,EAAGH,EAAoBhD,OAASlC,KAAK2D,UAC9E3D,KAAK2E,oBAAoB3E,KAAK+D,SAAS,IACzCiB,OAAOE,GACPF,OAAOhF,KAAK2E,oBAAoB3E,KAAK+D,SAAS,KAEvDuB,KAAK1B,EAAO2B,GAERvF,KAAKwD,eACL,IAAK,IAAIpD,EAAI,EAAGA,EAAIwD,EAAM1B,OAAQ9B,IAAK,CACnC,IAAIoF,EAAkB5B,EAAMxD,GAC5B,GAJoB,MAIhBoF,EAAqC,CACrC,GAAIpF,GAAKwD,EAAM1B,OAAS,EACpB,KAAO,sDAEXsD,EAAkB5B,IAAQxD,QAEzB,GAAwB,MAApBoF,IAAkC,IAANpF,GAVjB,MAU4BwD,EAAMxD,EAAI,IACtD,GAEI,GADAoF,GAAmB5B,IAAQxD,GACvBA,GAAKwD,EAAM1B,OACX,mDAAoDsD,wCAEvC,KAAZ5B,EAAMxD,IAEnBJ,KAAKwD,YAAYd,KAAK6C,EAAYE,KAAKD,IAE3CxF,KAAK6D,OAASD,EAElBK,0BACI,OAAOjE,KAAK+D,SAAS,GAAK/D,KAAK+D,SAAS,GAE5CG,qBACI,OAAQlE,KAAKwD,YAAYtB,OAAS,GAAKlC,KAAK2D,SAEhDc,wBACI,OAAOzE,KAAK+D,SAAS,GAAK/D,KAAK+D,SAAS,GAE5CY,oBAAoBzC,GAChB,OAAOwD,MAAMP,MAAM,KAAMO,MAAMxD,IAASiC,IAAI,IAAM,UC3H7CwB,EACT7D,YAAY8D,EAAUC,EAAQ7B,GAG1B,GAFAhE,KAAK8F,UAAYF,EACjB5F,KAAK+F,QAAUF,IACXA,EAAOpD,MAAQuB,GAIf,qBAAsB6B,EAAOpD,sDAAsDuB,KAEvF,GALIhE,KAAKgG,OAAShC,EAKd6B,EAAOpD,KAAOuB,GAAU,EAIxB,qBAAsB6B,EAAOpD,qDAAqDuB,KAHlFhE,KAAKiG,QAAUJ,EAAOpD,KAAOuB,EAMrCe,UAAU9B,GACN,GAAIA,EAAQ,EACR,eAAgBA,wBAEpB,GAAIA,GAASjD,KAAKgG,OACd,eAAgB/C,kDAAsDjD,KAAKgG,UAE/E,IAAIE,KACJ,IAAK,IAAI9F,EAAI,EAAGA,EAAIJ,KAAKiG,QAAS7F,IAC9B8F,EAAOxD,KAAK1C,KAAK+F,QAAQ/C,QAAQ5C,EAAIJ,KAAKgG,OAAS/C,IAEvD,OAAOiD,EAEXd,OAAOnC,GACH,GAAIA,EAAQ,EACR,eAAgBA,wBAEpB,GAAIA,GAASjD,KAAKiG,QACd,eAAgBhD,mDAAuDjD,KAAKiG,WAEhF,IAAIE,KACJ,IAAK,IAAI/F,EAAI,EAAGA,EAAIJ,KAAKgG,OAAQ5F,IAC7B+F,EAAIzD,KAAK1C,KAAK+F,QAAQ/C,QAAQC,EAAQjD,KAAKgG,OAAS5F,IAExD,OAAO+F,EAEXnC,YACI,OAAOhE,KAAKgG,OAEhBxB,aACI,OAAOxE,KAAKiG,QAEhBL,eACI,OAAO5F,KAAK8F,UAEhBD,aACI,OAAO7F,KAAK+F,QAEhBK,WAAWxC,GACP,OAAO5D,KAAK8F,UAAUO,QAAQzC,IAAU,SCxDnC0C,EACTxE,cACI9B,KAAKwD,eAETiC,KAAK7B,GACD,MAAMQ,EAAYpE,KAAKwD,YAAY+C,OAAOzC,GAAKA,EAAEsC,WAAWxC,IAC5D,GAAIQ,GAAaA,EAAUlC,OAAS,EAChC,OAAOkC,EAAU,GAErB,iCAAkCR,oBAEtCY,aACI,OAAOnC,KAAKmE,IAAIrB,MAAM9C,KAAMrC,KAAKwD,YAAYW,IAAIL,GAAKA,EAAEU,SAE5DtC,aACI,OAAOlC,KAAKwD,YAAYtB,OAE5BuE,IAAIC,GACA,MAAMC,KAAqB3B,OAAOG,SAAUuB,EAAkBvC,IAAIL,GAAKA,EAAE8B,WACnEgB,EAA4BD,EAAgBJ,OAAO,CAACnF,EAAO6B,EAAO4D,IAC7DA,EAAMR,QAAQjF,IAAU6B,GAEnC,GAAI2D,EAA0B1E,OAAS,EACnC,qLAAsL0E,EAA0BE,KAAK,QAEzN,GAAI9G,KAAKwD,YAAYtB,OAAS,EAAG,CAC7B,MACM6E,KAD0B/B,OAAOG,SAAUnF,KAAKwD,YAAYW,IAAIL,GAAKA,EAAE8B,WAC7BW,OAAQnF,IACV,GAAnCuF,EAAgBN,QAAQjF,IAEnC,GAAI2F,EAAmB7E,OAAS,EAC5B,kOAAmO6E,EAAmBD,KAAK,QAGnQ9G,KAAKwD,YAAYd,QAAQgE,UClCpBM,EACTC,aAAaC,EAAQlD,EAAOmD,GACxB,MAAMC,EAAQ,EAAID,EAEZE,EAAKrD,EAAQmD,EACbG,EAFKJ,EAAOhF,OAAS8B,EAEXmD,EAChB,IAAII,EAAc,IAAI7B,MAAM2B,EAAKC,GACjC,IAAK,IAAIlH,EAAI,EAAGA,EAAIkH,EAAIlH,IACpB,IAAK,IAAIoH,EAAI,EAAGA,EAAIH,EAAIG,IAAK,CACzB,MAAMC,EAAKpF,KAAKgB,MAAMmE,EAAIJ,GACpBM,EAAKrF,KAAKgB,MAAMjD,EAAIgH,GAC1BG,EAAanH,EAAIiH,EAAMG,GAAKN,EAAQQ,EAAK1D,EAASyD,GAG1D,OAAOF,SCXFI,EACTV,cAAcW,EAAMnF,EAAMoF,GACtBC,MAAMF,GACDG,KAAMC,GACAA,EAASC,QAEfF,KAAMC,IACPH,EAAQF,EAAeO,MAAMF,EAAUvF,MAEtC0F,MAAOC,IACR,6BAA8BR,MAGtCX,iBAEAA,aAAaoB,EAAM5F,GACf,GAAIA,EAAO,GAAKA,EAAO,GACnB,KAAM,kCAEV,MAAM6F,EAAOC,KAAKL,MAAMG,GACxB,GAAY,MAARC,EACA,KAAM,8BAEV,GAAuB,MAAnBA,EAAKE,WACL,KAAM,8DAEV,OAAOF,EAAKE,WAAWrE,IAAIL,IACvB,GAAkB,MAAdA,EAAE8B,SACF,KAAM,4EAEV,GAAgB,MAAZ9B,EAAE+B,OACF,KAAM,0EAEV,GAAe,MAAX/B,EAAEE,MACF,KAAM,yEAEV,MAAMyE,EAAe3E,EAAE+B,OAAO1B,IAAIL,GAAKA,GACjCM,EAAY4C,EAAgB0B,MAAMD,EAAc3E,EAAEE,MAAOvB,GAC/D,OAAO,IAAIkD,EAAU7B,EAAE8B,SAAU,IAAI/D,EAASuC,GAAYN,EAAEE,MAAQvB,KAG5EwE,iBAAiBuB,GACb,OAAkB,MAAdA,GAA2C,GAArBA,EAAWtG,OAC1BqG,KAAKI,UAAU,IAEnBJ,KAAKI,WACRH,WAAYA,EAAWrE,IAAIL,KAEnB8B,SAAU9B,EAAE8B,SACZC,OAAQ/B,EAAE+B,OAAO3C,aAAa,EAAGY,EAAE+B,OAAOpD,MAC1CuB,MAAOF,EAAEE,kBCrDhB4E,EACT9G,cACI9B,KAAK6I,YAETC,GAAGC,GACC/I,KAAK6I,SAASnG,KAAKqG,GAEvBC,IAAID,GACA/I,KAAK6I,SAAW7I,KAAK6I,SAAStC,OAAO0C,GAAKA,IAAMF,GAEpDG,QAAQZ,GACJtI,KAAK6I,SAASxD,MAAM,GAAGtC,QAAQkG,GAAKA,EAAEX,IAE1Ca,SACI,OAAOnJ,YCbFoJ,EACTtH,YAAYyB,GACRvD,KAAKqJ,cAAgB,IAAIT,EACzB5I,KAAKsJ,mBAAqB,IAAIV,EAC9B5I,KAAKgE,MAAQT,EAAOS,MACpBhE,KAAKuJ,IAAMhG,EAAOgG,IAClBvJ,KAAKwJ,OAASjG,EAAOkG,MACrBzJ,KAAKiD,MAAQ,EACbjD,KAAK0J,WAAanG,EAAOoG,UACzB3J,KAAK4J,WACL5J,KAAK6J,UAAYtG,EAAOuG,SACxB9J,KAAK+J,SAAWxG,EAAOyG,QAE3BC,kBAAoB,OAAOjK,KAAKqJ,cAAcF,SAC9Ce,uBAAyB,OAAOlK,KAAKsJ,mBAAmBH,SACxDnF,UAAU5C,GACN,GAAa,MAATA,EACA,KAAO,sCAEX,GAAIA,EAAQ,EACR,0DAA2DA,KAE/DpB,KAAKgG,OAAS5E,EAElB4C,YACI,OAAOhE,KAAKgG,OAEhBuD,QAAQnI,GACJ,GAAa,MAATA,EACA,KAAO,oCAEX,GAAIA,EAAQ,EACR,wDAAyDA,KAG7D,GAAIA,EADW,GAEX,KAAO,sCAEXpB,KAAKmK,KAAO/I,EACZpB,KAAKoK,aAAe,IAAOpK,KAAKmK,KAEpCZ,UACI,OAAOvJ,KAAKmK,KAEhBV,UAAUrI,GACN,GAAa,MAATA,EACA,KAAO,sCAEXpB,KAAKwJ,OAASpI,EAElBqI,YACI,OAAOzJ,KAAKwJ,OAEhBG,cAAcvI,GACV,GAAa,MAATA,EACA,KAAO,oCAEX,GAAIA,EAAQ,EACR,wDAAyDA,KAE7DpB,KAAK0J,WAAatI,EAEtBuI,gBACI,OAAO3J,KAAK0J,WAEhBI,aAAa1I,GACT,GAAa,MAATA,EACA,KAAO,yCAEXpB,KAAK6J,UAAYzI,EAErB0I,eACI,OAAO9J,KAAK6J,UAEhBG,YAAY5I,GACR,GAAa,MAATA,EACA,KAAO,wCAEXpB,KAAK+J,SAAW3I,EAEpB4I,cACI,OAAOhK,KAAK+J,SAEhBM,OACIrK,KAAKiD,MAAQ,EACbjD,KAAKsK,QACLtK,KAAKuK,aAETC,OACIxK,KAAKiD,MAAQ,EACbjD,KAAKsK,QACLtK,KAAKyK,eAAgB,EAEzBC,SACI1K,KAAKuK,aAETI,QACI3K,KAAKyK,eAAgB,EAEzBG,KAAKC,GACD,GAAa,MAATA,GAAiBA,EAAQ,GAAKA,EAAQ7K,KAAK8K,gBAC3C,2CAA4C9K,KAAK8K,kBAErD9K,KAAKiD,MAAQ4H,EACb7K,KAAKsK,QAETS,OACI/K,KAAKgL,QAETA,QACIhL,KAAKiL,aACLjL,KAAKsK,QAETA,QACItK,KAAKkL,cACLlL,KAAKmL,iBAAiBnL,KAAKiD,OAC3BjD,KAAKqJ,cAAcH,SAAUU,QAAS5J,KAAK4J,UAC3C5J,KAAK6J,UAAUuB,OAAOpL,KAAK4J,SAE/BqB,aACIjL,KAAK+J,SAAW/J,KAAKqL,kBAAoBrL,KAAKsL,kBAElDJ,cACIlL,KAAK4J,QAAQ2B,OAAO,EAAGvL,KAAK4J,QAAQ1H,QACpC,IAAK,IAAI9B,EAAI,EAAGA,EAAIJ,KAAKwJ,OAAOhF,OAAQpE,IACpCJ,KAAK4J,QAAQlH,KAAKgD,MAAMP,MAAM,KAAMO,MAAM1F,KAAKgE,QAAQG,IAAIqH,OAAO/J,UAAUgK,QAAS,IAG7FH,kBACQtL,KAAKiD,OAASjD,KAAK8K,iBACnB9K,KAAKsJ,mBAAmBJ,UACxBlJ,KAAKiD,MAAQ,GAGbjD,KAAKiD,OAASjD,KAAK0J,WAG3B2B,kBACuB,IAAfrL,KAAKiD,OACLjD,KAAKsJ,mBAAmBJ,UACxBlJ,KAAKiD,MAAQjD,KAAK8K,iBAGlB9K,KAAKiD,OAASjD,KAAK0J,WAG3Ba,aACIvK,KAAK0L,MAAQC,KAAKC,MAClB5L,KAAK6L,WAAa7L,KAAK0L,MACvB1L,KAAKyK,eAAgB,EACrBzK,KAAK8L,QAETA,QACIC,sBAAsB/L,KAAK8L,MAAME,KAAKhM,OAClCA,KAAKyK,eACLzK,KAAKiM,aAAajM,KAAKgL,MAAMgB,KAAKhM,OAG1CiM,aAAaC,GACTlM,KAAKmM,KAAOR,KAAKC,MACjB5L,KAAKoM,SAAWpM,KAAKmM,KAAOnM,KAAK0L,MAC7B1L,KAAKoM,SAAWpM,KAAKoK,eACrBpK,KAAK0L,MAAQ1L,KAAKmM,KAAQnM,KAAKoM,SAAWpM,KAAKoK,aAC/C8B,YCnKCG,UAA2BjD,EACpCtH,YAAYyB,GACR+I,MAAM/I,GAEVuH,sBACI,OAAO9K,KAAKyJ,MAAMzF,MAAQ,EAE9BmH,iBAAiBoB,GACb,IAAK,IAAInM,EAAI,EAAGA,EAAIJ,KAAKgE,MAAO5D,IAAK,CACjC,IAAI8F,EACJA,EAASlG,KAAKyJ,MAAM/E,iBAAiB6H,EAAenM,GACpD,IAAK,IAAIoH,EAAI,EAAGA,EAAIxH,KAAKyJ,MAAMjF,OAAQgD,IACnCxH,KAAK4J,QAAQpC,GAAGpH,GAAK8F,EAAOsB,WCZ/BgF,UAA+BpD,EACxCtH,YAAYyB,GACR+I,MAAM/I,GAEVuH,sBACI,OAAO9K,KAAKyJ,MAAMjF,OAAS,EAE/B2G,iBAAiBoB,GACb,IAAK,IAAInM,EAAI,EAAGA,EAAIJ,KAAKyJ,MAAMjF,OAAQpE,IAAK,CACxC,IAAI+F,EACJA,EAAMnG,KAAKyJ,MAAMxE,cAAcsH,EAAenM,GAC9CJ,KAAK4J,QAAQxJ,GAAK+F,EAAId,MAAM,EAAGrF,KAAKgE,SCVzC,IAAIyI,ECDAC,GDEX,SAAWC,GACPA,EAAUA,EAAA,mBAAkC,GAAK,qBACjDA,EAAUA,EAAA,uBAAsC,GAAK,yBAFzD,CAGGF,IAAcA,aACJG,EACT3F,aAAa4F,EAAWtJ,GACpB,OAAQsJ,GACJ,KAAKJ,EAAUK,mBACX,OAAO,IAAIT,EAAmB9I,GAClC,KAAKkJ,EAAUM,uBACX,OAAO,IAAIP,EAAuBjJ,WEbrCyJ,SCCAC,UAAsBD,EAC/BlL,YAAYoL,GACRZ,QACAtM,KAAKmN,aACDC,QAASF,EAAWE,QACpBC,eAAgBH,EAAWG,eAAiBH,EAAWG,eAAiB,IACxEC,gBAAiBJ,EAAWI,gBAAkBJ,EAAWI,gBAAkB,KAGnFJ,iBACI,OAAOlN,KAAKmN,YAEhB/B,OAAOxB,GACH,IAAI/D,EAAS,GACb,IAAK,IAAIzF,EAAI,EAAGA,EAAIwJ,EAAQ1H,OAAQ9B,IAAK,CACrC,IAAK,IAAIoH,EAAI,EAAGA,EAAIoC,EAAQxJ,GAAG8B,OAAQsF,IACnC3B,GAA2B,GAAjB+D,EAAQxJ,GAAGoH,GACjBxH,KAAKmN,YAAYE,eACjBrN,KAAKmN,YAAYG,gBAEzBzH,GAAU,KAEd7F,KAAKmN,YAAYC,QAAQG,UAAY1H,SCjBhC2H,EACT1L,YAAYyB,GACRvD,KAAKyN,QAAU,IAAI7E,EACnB5I,KAAK0N,QAAU1N,KAAK2N,oBAAoBpK,GACxCvD,KAAKwJ,OAAS,IAAIlG,GACdG,QAASzD,KAAK0N,QAAQjK,QACtBC,QAAS1D,KAAK0N,QAAQhK,UAE1B1D,KAAK4N,WAAa5N,KAAK0N,QAAQb,UAC/B7M,KAAK6N,OAASjB,EAAakB,MAAM9N,KAAK0N,QAAQb,WAC1CpD,MAAOzJ,KAAKwJ,OACZM,SAAU9J,KAAK0N,QAAQ5D,SACvBP,IAAKvJ,KAAK0N,QAAQnE,IAClBI,UAAW3J,KAAK0N,QAAQ/D,UACxBK,QAAShK,KAAK0N,QAAQ1D,QACtBhG,MAAOhE,KAAK0N,QAAQK,aAExB/N,KAAKgO,OACDC,YAAajO,KAAK6N,OAAO5D,YACzBiE,iBAAkBlO,KAAK6N,OAAO3D,iBAC9BiE,MAAOnO,KAAKoO,OAGpBA,YAAc,OAAOpO,KAAKyN,QAAQtE,SAClCkF,KAAK5L,EAAMyJ,GACPvE,EAAe2G,OAAOtO,KAAK0N,QAAQa,eAAgB9L,GAAc,EAAI+F,IACjExI,KAAKwO,YAAc,IAAIlI,EACvBtG,KAAKwO,YAAY/H,IAAI+B,GACrBxI,KAAKwJ,OAAOlE,KAA0B,MAArBtF,KAAKwJ,OAAO5F,MAAgB5D,KAAKwJ,OAAO5F,MAAQ5D,KAAK0N,QAAQ9J,MAAO5D,KAAKwO,aAC1FxO,KAAK6N,OAAOxD,OACZrK,KAAKyN,QAAQvE,UACTgD,GACAA,MAIZzJ,WACI,OAAOzC,KAAKiC,MAEhBQ,SAASrB,GACLpB,KAAKiC,MAAQb,EACbpB,KAAKqO,KAAKjN,GAEd6B,YACI,OAAOjD,KAAK6N,OAAO5K,MAEvBQ,YAAYrC,GACRpB,KAAKwJ,OAAO/F,QAAUrC,EACtBpB,KAAK6N,OAAOpE,MAAQzJ,KAAKwJ,OAE7B/F,cACI,OAAOzD,KAAKwJ,OAAO/F,QAEvBC,YAAYtC,GACRpB,KAAKwJ,OAAO9F,QAAUtC,EACtBpB,KAAK6N,OAAOpE,MAAQzJ,KAAKwJ,OAE7B9F,cACI,OAAO1D,KAAKwJ,OAAO9F,QAEvBM,YACI,OAAOhE,KAAKwJ,OAAOxF,MAEvBQ,aACI,OAAOxE,KAAKwJ,OAAOhF,OAEvBZ,UAAUxC,GACNpB,KAAKwJ,OAAOlE,KAAKlE,EAAOpB,KAAKwO,aAEjC5K,YACI,OAAO5D,KAAKwJ,OAAO5F,MAEvByG,OACIrK,KAAK6N,OAAOxD,OAEhBG,OACIxK,KAAK6N,OAAOrD,OAEhBG,QACI3K,KAAK6N,OAAOlD,QAEhBD,SACI1K,KAAK6N,OAAOnD,SAEhBK,OACI/K,KAAK6N,OAAO9C,OAEhBH,KAAKC,GACD7K,KAAK6N,OAAOjD,KAAKC,GAErBgC,cAAczL,GACVpB,KAAK4N,WAAaxM,EAClBpB,KAAK6N,OAAOrD,OACZxK,KAAK6N,OAASjB,EAAakB,MAAM9N,KAAK4N,YAClCnE,MAAOzJ,KAAKwJ,OACZM,SAAU9J,KAAK6N,OAAO/D,SACtBP,IAAKvJ,KAAK6N,OAAOtE,IACjBI,UAAW3J,KAAK6N,OAAOlE,UACvBK,QAAShK,KAAK6N,OAAO7D,QACrBhG,MAAOhE,KAAK6N,OAAO7J,QAEvBhE,KAAK6N,OAAOxD,OAEhBwC,gBACI,OAAO7M,KAAK4N,WAEhB9D,aAAa1I,GACTpB,KAAK6N,OAAO/D,SAAW1I,EAE3B0I,eACI,OAAO9J,KAAK6N,OAAO/D,SAEvBP,QAAQnI,GACJpB,KAAK6N,OAAOtE,IAAMnI,EAEtBmI,UACI,OAAOvJ,KAAK6N,OAAOtE,IAEvBI,cAAcvI,GACVpB,KAAK6N,OAAOlE,UAAYvI,EAE5BuI,gBACI,OAAO3J,KAAK6N,OAAOlE,UAEvBK,YAAY5I,GACRpB,KAAK6N,OAAO7D,QAAU5I,EAE1B4I,cACI,OAAOhK,KAAK6N,OAAO7D,QAEvByE,kBAAkBrN,GACdpB,KAAK6N,OAAO7J,MAAQ5C,EAExBqN,oBACI,OAAOzO,KAAK6N,OAAO7J,MAEvB2J,oBAAoBpK,GAChB,MAAMmL,GACF9K,MAAO,cACP2K,eAAgB,gBAChBhF,IAAK,GACLI,UAAW,EACXkD,UAAWJ,EAAUK,mBACrBhD,SAAU,IAAImD,GACVG,QAASuB,SAASC,eAAe,cACjCvB,eAAgB,IAChBC,gBAAiB,MAErBtD,SAAS,EACT+D,WAAY,GACZtK,QAAS,EACTC,SAAU,EAAG,IAEjB,OAAIH,GACAA,EAAOK,MAAQ5D,KAAK6O,gBAAgBtL,EAAOK,MAAO8K,EAAc9K,OAChEL,EAAOgL,eAAiBvO,KAAK6O,gBAAgBtL,EAAOgL,eAAgBG,EAAcH,gBAClFhL,EAAOE,QAAUzD,KAAK6O,gBAAgBtL,EAAOE,QAASiL,EAAcjL,SACpEF,EAAOG,QAAU1D,KAAK6O,gBAAgBtL,EAAOG,QAASgL,EAAchL,SACpEH,EAAOgG,IAAMvJ,KAAK6O,gBAAgBtL,EAAOgG,IAAKmF,EAAcnF,KAC5DhG,EAAOoG,UAAY3J,KAAK6O,gBAAgBtL,EAAOoG,UAAW+E,EAAc/E,WACxEpG,EAAOsJ,UAAY7M,KAAK6O,gBAAgBtL,EAAOsJ,UAAW6B,EAAc7B,WACxEtJ,EAAOuG,SAAW9J,KAAK6O,gBAAgBtL,EAAOuG,SAAU4E,EAAc5E,UACtEvG,EAAOyG,QAAUhK,KAAK6O,gBAAgBtL,EAAOyG,QAAS0E,EAAc1E,SACpEzG,EAAOwK,WAAa/N,KAAK6O,gBAAgBtL,EAAOwK,WAAYW,EAAcX,YACnExK,GAEJmL,EAEXG,gBAAgBzN,EAAO0N,GACnB,OAAO1N,GAAgB0N,SC9KlBC,UAAsB/B,EAC/BlL,YAAYoL,GACRZ,QACAtM,KAAKmN,aACD6B,MAAO9B,EAAW8B,MAClBC,WAAY/B,EAAW+B,WAAa/B,EAAW+B,WAAa,UAC5DC,YAAahC,EAAWgC,YAAchC,EAAWgC,YAAc,UAC/DC,cAAejC,EAAWiC,cAAgBjC,EAAWiC,cAAgB,UACrEC,eAAgBlC,EAAWkC,eAAiBlC,EAAWkC,eAAiB,WAGhFlC,iBACI,OAAOlN,KAAKmN,YAEhB/B,OAAOxB,GACH,MAAMyF,EAAMrP,KAAKmN,YAAY6B,MAAMM,WAAW,MAC9CD,EAAIE,UAAU,EAAG,EAAGvP,KAAKmN,YAAY6B,MAAMhL,MAAOhE,KAAKmN,YAAY6B,MAAMxK,QACzE,MAAMgL,EAAenN,KAAKgB,MAAMrD,KAAKmN,YAAY6B,MAAMhL,MAAQ4F,EAAQ,GAAG1H,QACpEuN,EAAgBpN,KAAKgB,MAAMrD,KAAKmN,YAAY6B,MAAMxK,OAASoF,EAAQ1H,QACzEmN,EAAIK,UAAY,EAChB,MAAMC,EAAoB,CAACvO,EAAOwO,EAAWC,KACzCR,EAAIS,YAAcD,EAClBR,EAAIU,UAAYH,EAChBP,EAAIW,YACJ,IAAK,IAAI5P,EAAI,EAAGA,EAAIwJ,EAAQ1H,OAAQ9B,IAChC,IAAK,IAAIoH,EAAI,EAAGA,EAAIoC,EAAQxJ,GAAG8B,OAAQsF,IAC/BoC,EAAQxJ,GAAGoH,IAAMpG,IACjBpB,KAAKiQ,cAAcZ,EAAKjP,EAAGoH,EAAGgI,EAAcC,GAC5CzP,KAAKkQ,QAAQb,EAAKjP,EAAGoH,EAAGgI,EAAcC,IAIlDJ,EAAIc,OACJd,EAAIe,UAERT,EAAkB,EAAG3P,KAAKmN,YAAY+B,YAAalP,KAAKmN,YAAYiC,gBACpEO,EAAkB,EAAG3P,KAAKmN,YAAY8B,WAAYjP,KAAKmN,YAAYgC,iBJnC3E,SAAWkB,GAcPA,EAAeC,sBAbOvB,EAClBjN,YAAYoL,GACRZ,MAAMY,GAEV+C,cAAcZ,EAAKjP,EAAGoH,EAAG+I,EAAGtH,GACxBoG,EAAImB,OAAOD,GAAK/I,EAAI,GAAIyB,GAAK7I,EAAI,GAAK6I,EAAI,GAE9CiH,QAAQb,EAAKjP,EAAGoH,EAAG+I,EAAGtH,GAClB,MAAMwH,EAAOF,EAAI,EACXG,EAAOzH,EAAI,EACjBoG,EAAIsB,QAAQJ,EAAI/I,EAAIiJ,EAAMxH,EAAI7I,EAAIsQ,EAAMD,EAAMC,EAAM,EAAG,EAAG,EAAIrO,KAAKuO,MAc3EP,EAAeQ,mBAVI9B,EACfjN,YAAYoL,GACRZ,MAAMY,GAEVgD,QAAQY,EAAS1Q,EAAGoH,EAAG+I,EAAGtH,GACtB,OAAO6H,EAAQC,KAAKR,EAAI/I,EAAGyB,EAAI7I,EAAGmQ,EAAGtH,GAEzCgH,cAAcZ,EAAKjP,EAAGoH,EAAG+I,EAAGtH,MAtBpC,CA0BGyD,IAAmBA","file":"./src/led-matrix.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ledMatrix\"] = factory();\n\telse\n\t\troot[\"ledMatrix\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class BitArray {\n    constructor(values) {\n        this._bitPerIndex = 8;\n        this._size = values.length;\n        this._array = new Uint8Array(Math.ceil(this._size / this._bitPerIndex));\n        this._pointer = 0;\n        this.pushAll(values);\n    }\n    get size() {\n        return this._size;\n    }\n    push(value) {\n        if (this._pointer == this._size) {\n            throw `Bit array max size reached (${this._size})`;\n        }\n        const mask = this._createMask(this._pointer);\n        if (this._matchesMask(mask, this._array[this._arrayIndex(this._pointer)])) {\n            if (value === 0) {\n                this._array[this._arrayIndex(this._pointer)] ^= mask;\n            }\n        }\n        else {\n            if (value === 1) {\n                this._array[this._arrayIndex(this._pointer)] ^= mask;\n            }\n        }\n        this._pointer++;\n    }\n    pushAll(values) {\n        values.forEach((value) => {\n            this.push(value);\n        });\n    }\n    atIndex(index) {\n        if (index > this._size) {\n            throw `Index (${index}) exceeds the size of the bit array (${this._size})`;\n        }\n        const mask = this._createMask(index);\n        return this._matchesMask(mask, this._array[this._arrayIndex(index)]) ? 1 : 0;\n    }\n    atIndexRange(index, count) {\n        if (index + count - 1 > this._size) {\n            throw `Index (${index}) exceeds the size of the bit array (${this._size})`;\n        }\n        const values = [];\n        for (let i = 0; i < count; i++) {\n            const mask = this._createMask(index + i);\n            values.push(this._matchesMask(mask, this._array[this._arrayIndex(index + i)]) ? 1 : 0);\n        }\n        return values;\n    }\n    _matchesMask(mask, value) {\n        return (mask & value) != 0;\n    }\n    _createMask(index) {\n        return 1 << (this._bitPerIndex - 1) - this._arrayIndexOffset(index);\n    }\n    _arrayIndex(index) {\n        return Math.floor(index / this._bitPerIndex);\n    }\n    _arrayIndexOffset(index) {\n        return index % this._bitPerIndex;\n    }\n}\n;\n//# sourceMappingURL=bit-array.js.map","export class Board {\n    constructor(params) {\n        this._characters = [];\n        this.spacing = params.spacing;\n        this.padding = params.padding;\n    }\n    set spacing(value) {\n        if (value == null) {\n            throw `Board's spacing cannot be set to null`;\n        }\n        if (value < 0) {\n            throw `Board's spacing cannot be set to a negative number (${value})`;\n        }\n        this._spacing = value;\n    }\n    get spacing() {\n        return this._spacing;\n    }\n    get input() {\n        return this._input;\n    }\n    set padding(value) {\n        value.forEach(x => {\n            if (x == null) {\n                throw `Board's padding cannot set to null`;\n            }\n            if (x < 0) {\n                throw `Board's padding cannot be set to a negative number (${value})`;\n            }\n        });\n        if (value.length == 1) {\n            this._padding = [value[0], value[0], value[0], value[0]];\n        }\n        else if (value.length == 2) {\n            this._padding = [value[0], value[1], value[0], value[1]];\n        }\n        else {\n            this._padding = value;\n        }\n    }\n    get padding() {\n        return this._padding;\n    }\n    get width() {\n        return this._horizontalPaddingWidth() +\n            this._totalSpacingWidth() +\n            this._characters\n                .map(character => character.width)\n                .reduce((accumulator, current) => accumulator + current);\n    }\n    get height() {\n        return this._verticalPaddingWidth() +\n            this._characters\n                .reduce((accumulator, current) => current.height > accumulator.height ? current : accumulator).height;\n    }\n    getColumnAtIndex(index) {\n        index %= this.width;\n        if (index < this._padding[3] || index >= this.width - this._padding[1]) {\n            return this._emptyArrayOfLength(this.height);\n        }\n        let accumulator = this._padding[3];\n        let toReturn;\n        this._characters.some((character) => {\n            accumulator += character.width;\n            if (accumulator > index) {\n                const characterColumn = character.getColumn(index - (accumulator - character.width));\n                toReturn = this._emptyArrayOfLength(this._padding[0])\n                    .concat(characterColumn)\n                    .concat(this._emptyArrayOfLength(this._padding[2]));\n                return true;\n            }\n            accumulator += this._spacing;\n            if (accumulator > index) {\n                toReturn = this._emptyArrayOfLength(this.height);\n                return true;\n            }\n        });\n        return toReturn;\n    }\n    getRowAtIndex(index) {\n        index %= this.height;\n        if (index < this._padding[0] || index >= this.height - this._padding[2]) {\n            return this._emptyArrayOfLength(this.width);\n        }\n        let charactersWithSpace = [].concat.apply([], this._characters.map(x => x.getRow(index - this._padding[0]).concat(this._emptyArrayOfLength(this._spacing))));\n        charactersWithSpace = charactersWithSpace.slice(0, charactersWithSpace.length - this._spacing);\n        return this._emptyArrayOfLength(this._padding[3])\n            .concat(charactersWithSpace)\n            .concat(this._emptyArrayOfLength(this._padding[1]));\n    }\n    load(input, dictionnary) {\n        const escapeCharacter = '~';\n        this._characters = [];\n        for (let i = 0; i < input.length; i++) {\n            let characterBuffer = input[i];\n            if (characterBuffer === escapeCharacter) {\n                if (i == input.length - 1) {\n                    throw `No character escaped at the end of the string input`;\n                }\n                characterBuffer = input[++i];\n            }\n            else if (characterBuffer === \"[\" && (i === 0 || input[i - 1] !== escapeCharacter)) {\n                do {\n                    characterBuffer += input[++i];\n                    if (i == input.length) {\n                        throw `Could not find the end bracket for pattern ${characterBuffer}. To escape the bracket, use ${escapeCharacter}`;\n                    }\n                } while (input[i] != \"]\");\n            }\n            this._characters.push(dictionnary.find(characterBuffer));\n        }\n        this._input = input;\n    }\n    _horizontalPaddingWidth() {\n        return this._padding[1] + this._padding[3];\n    }\n    _totalSpacingWidth() {\n        return (this._characters.length - 1) * this._spacing;\n    }\n    _verticalPaddingWidth() {\n        return this._padding[0] + this._padding[2];\n    }\n    _emptyArrayOfLength(length) {\n        return Array.apply(null, Array(length)).map(() => 0);\n    }\n}\n;\n//# sourceMappingURL=board.js.map","export class Character {\n    constructor(patterns, output, width) {\n        this._patterns = patterns;\n        this._output = output;\n        if (output.size >= width) {\n            this._width = width;\n        }\n        else {\n            throw `Output size (${output.size}) can't be smaller than the character's width (${width})`;\n        }\n        if (output.size % width === 0) {\n            this._height = output.size / width;\n        }\n        else {\n            throw `Output size (${output.size}) must be divisible by the character's width (${width})`;\n        }\n    }\n    getColumn(index) {\n        if (index < 0) {\n            throw `Index (${index}) cannot be negative`;\n        }\n        if (index >= this._width) {\n            throw `Index (${index}) is greater than the width of the character (${this._width})`;\n        }\n        let column = [];\n        for (let i = 0; i < this._height; i++) {\n            column.push(this._output.atIndex(i * this._width + index));\n        }\n        return column;\n    }\n    getRow(index) {\n        if (index < 0) {\n            throw `Index (${index}) cannot be negative`;\n        }\n        if (index >= this._height) {\n            throw `Index (${index}) is greater than the height of the character (${this._height})`;\n        }\n        let row = [];\n        for (let i = 0; i < this._width; i++) {\n            row.push(this._output.atIndex(index * this._width + i));\n        }\n        return row;\n    }\n    get width() {\n        return this._width;\n    }\n    get height() {\n        return this._height;\n    }\n    get patterns() {\n        return this._patterns;\n    }\n    get output() {\n        return this._output;\n    }\n    hasPattern(input) {\n        return this._patterns.indexOf(input) >= 0;\n    }\n}\n;\n//# sourceMappingURL=character.js.map","export class CharacterDictionary {\n    constructor() {\n        this._characters = [];\n    }\n    find(input) {\n        const character = this._characters.filter(x => x.hasPattern(input));\n        if (character && character.length > 0) {\n            return character[0];\n        }\n        throw `Could not find character ${input} in the alphabet`;\n    }\n    get height() {\n        return Math.max.apply(Math, this._characters.map(x => x.height));\n    }\n    get length() {\n        return this._characters.length;\n    }\n    add(pendingCharacters) {\n        const pendingPatterns = [].concat.apply([], pendingCharacters.map(x => x.patterns));\n        const duplicatedPendingPatterns = pendingPatterns.filter((value, index, array) => {\n            return array.indexOf(value) != index;\n        });\n        if (duplicatedPendingPatterns.length > 0) {\n            throw `Different characters cannot have the same patterns. Some of the characters pending to be added have the same patterns. The following patterns were identified as duplicates: ${duplicatedPendingPatterns.join(\", \")}`;\n        }\n        if (this._characters.length > 0) {\n            const alreadyAddedPatterns = [].concat.apply([], this._characters.map(x => x.patterns));\n            const duplicatedPatterns = alreadyAddedPatterns.filter((value) => {\n                return pendingPatterns.indexOf(value) != -1;\n            });\n            if (duplicatedPatterns.length > 0) {\n                throw `Different characters cannot have the same patterns. One or more of the characters pending to be added has the same pattern as one or more already added characters. The following patterns were identified as duplicates: ${duplicatedPatterns.join(\", \")}`;\n            }\n        }\n        this._characters.push(...pendingCharacters);\n    }\n}\n;\n//# sourceMappingURL=character-dictionary.js.map","export class NearestNeighbor {\n    static scale(matrix, width, factor) {\n        const ratio = 1 / factor;\n        const h1 = matrix.length / width;\n        const w2 = width * factor;\n        const h2 = h1 * factor;\n        let finalMatrix = new Array(w2 * h2);\n        for (let i = 0; i < h2; i++) {\n            for (let j = 0; j < w2; j++) {\n                const px = Math.floor(j * ratio);\n                const py = Math.floor(i * ratio);\n                finalMatrix[(i * w2) + j] = matrix[(py * width) + px];\n            }\n        }\n        return finalMatrix;\n    }\n}\n//# sourceMappingURL=character-sizer.js.map","import { Character } from \"./character\";\nimport { BitArray } from \"./bit-array\";\nimport { NearestNeighbor } from \"./character-sizer\";\nexport class CharactersJSON {\n    static import(path, size, success) {\n        fetch(path)\n            .then((response) => {\n            return response.text();\n        })\n            .then((response) => {\n            success(CharactersJSON.parse(response, size));\n        })\n            .catch((error) => {\n            throw `Couldn't fetch file: ${path}`;\n        });\n    }\n    static export() {\n    }\n    static parse(json, size) {\n        if (size < 1 || size > 10) {\n            throw 'Size should be between 1 and 10';\n        }\n        const data = JSON.parse(json);\n        if (data == null) {\n            throw 'Invalid character json file';\n        }\n        if (data.characters == null) {\n            throw 'Invalid character json file: Can\\'t find property characters';\n        }\n        return data.characters.map(x => {\n            if (x.patterns == null) {\n                throw 'Invalid character json file: Can\\'t find property patterns for a character';\n            }\n            if (x.output == null) {\n                throw 'Invalid character json file: Can\\'t find property output for a character';\n            }\n            if (x.width == null) {\n                throw 'Invalid character json file: Can\\'t find property width for a character';\n            }\n            const characterRaw = x.output.map(x => x);\n            const character = NearestNeighbor.scale(characterRaw, x.width, size);\n            return new Character(x.patterns, new BitArray(character), x.width * size);\n        });\n    }\n    static stringify(characters) {\n        if (characters == null || characters.length == 0) {\n            return JSON.stringify(\"\");\n        }\n        return JSON.stringify({\n            characters: characters.map(x => {\n                return {\n                    patterns: x.patterns,\n                    output: x.output.atIndexRange(0, x.output.size),\n                    width: x.width\n                };\n            })\n        });\n    }\n}\n//# sourceMappingURL=character-json.js.map","export class Event {\n    constructor() {\n        this.handlers = [];\n    }\n    on(handler) {\n        this.handlers.push(handler);\n    }\n    off(handler) {\n        this.handlers = this.handlers.filter(h => h !== handler);\n    }\n    trigger(data) {\n        this.handlers.slice(0).forEach(h => h(data));\n    }\n    expose() {\n        return this;\n    }\n}\n//# sourceMappingURL=event.js.map","import { Event } from './event';\nexport class Panel {\n    constructor(params) {\n        this.onPanelUpdate = new Event();\n        this.onReachingBoundary = new Event();\n        this.width = params.width;\n        this.fps = params.fps;\n        this._board = params.board;\n        this.index = 0;\n        this._increment = params.increment;\n        this.display = [];\n        this._renderer = params.renderer;\n        this._reverse = params.reverse;\n    }\n    get PanelUpdate() { return this.onPanelUpdate.expose(); }\n    get ReachingBoundary() { return this.onReachingBoundary.expose(); }\n    set width(value) {\n        if (value == null) {\n            throw `Panel's width cannot be set to null`;\n        }\n        if (value < 0) {\n            throw `Panel's width cannot be set to a negative number (${value})`;\n        }\n        this._width = value;\n    }\n    get width() {\n        return this._width;\n    }\n    set fps(value) {\n        if (value == null) {\n            throw `Panel's fps cannot be set to null`;\n        }\n        if (value < 0) {\n            throw `Panel's fps cannot be set to a negative number (${value})`;\n        }\n        const maxFps = 60;\n        if (value > maxFps) {\n            throw `Panel's fps has to be lower than ${maxFps}`;\n        }\n        this._fps = value;\n        this._fpsInterval = 1000 / this._fps;\n    }\n    get fps() {\n        return this._fps;\n    }\n    set board(value) {\n        if (value == null) {\n            throw `Panel's board cannot be set to null`;\n        }\n        this._board = value;\n    }\n    get board() {\n        return this._board;\n    }\n    set increment(value) {\n        if (value == null) {\n            throw `Panel's fps cannot be set to null`;\n        }\n        if (value < 0) {\n            throw `Panel's fps cannot be set to a negative number (${value})`;\n        }\n        this._increment = value;\n    }\n    get increment() {\n        return this._increment;\n    }\n    set renderer(value) {\n        if (value == null) {\n            throw `Panel's renderer cannot be set to null`;\n        }\n        this._renderer = value;\n    }\n    get renderer() {\n        return this._renderer;\n    }\n    set reverse(value) {\n        if (value == null) {\n            throw `Panel's reverse cannot be set to null`;\n        }\n        this._reverse = value;\n    }\n    get reverse() {\n        return this._reverse;\n    }\n    play() {\n        this.index = 0;\n        this._draw();\n        this._startLoop();\n    }\n    stop() {\n        this.index = 0;\n        this._draw();\n        this._shouldUpdate = false;\n    }\n    resume() {\n        this._startLoop();\n    }\n    pause() {\n        this._shouldUpdate = false;\n    }\n    seek(frame) {\n        if (frame == null || frame < 0 || frame > this.indexUpperBound) {\n            throw `Seek expects a value between 0 and ${this.indexUpperBound}`;\n        }\n        this.index = frame;\n        this._draw();\n    }\n    tick() {\n        this._step();\n    }\n    _step() {\n        this._tickIndex();\n        this._draw();\n    }\n    _draw() {\n        this._resetPanel();\n        this._generateDisplay(this.index);\n        this.onPanelUpdate.trigger({ display: this.display });\n        this._renderer.render(this.display);\n    }\n    _tickIndex() {\n        this._reverse ? this._decrementIndex() : this._incrementIndex();\n    }\n    _resetPanel() {\n        this.display.splice(0, this.display.length);\n        for (let i = 0; i < this._board.height; i++) {\n            this.display.push(Array.apply(null, Array(this.width)).map(Number.prototype.valueOf, 0));\n        }\n    }\n    _incrementIndex() {\n        if (this.index >= this.indexUpperBound) {\n            this.onReachingBoundary.trigger();\n            this.index = 0;\n        }\n        else {\n            this.index += this._increment;\n        }\n    }\n    _decrementIndex() {\n        if (this.index === 0) {\n            this.onReachingBoundary.trigger();\n            this.index = this.indexUpperBound;\n        }\n        else {\n            this.index -= this._increment;\n        }\n    }\n    _startLoop() {\n        this._then = Date.now();\n        this._startTime = this._then;\n        this._shouldUpdate = true;\n        this._loop();\n    }\n    _loop() {\n        requestAnimationFrame(this._loop.bind(this));\n        if (this._shouldUpdate) {\n            this._onNextFrame(this._step.bind(this));\n        }\n    }\n    _onNextFrame(callback) {\n        this._now = Date.now();\n        this._elapsed = this._now - this._then;\n        if (this._elapsed > this._fpsInterval) {\n            this._then = this._now - (this._elapsed % this._fpsInterval);\n            callback();\n        }\n    }\n}\n;\n//# sourceMappingURL=panel.js.map","import { Panel } from \"../panel\";\nexport class SideScrollingPanel extends Panel {\n    constructor(params) {\n        super(params);\n    }\n    get indexUpperBound() {\n        return this.board.width - 1;\n    }\n    _generateDisplay(currentIndex) {\n        for (let i = 0; i < this.width; i++) {\n            let column;\n            column = this.board.getColumnAtIndex(currentIndex + i);\n            for (let j = 0; j < this.board.height; j++) {\n                this.display[j][i] = column[j];\n            }\n        }\n    }\n}\n//# sourceMappingURL=side-scrolling-panel.js.map","import { Panel } from \"../panel\";\nexport class VerticalScrollingPanel extends Panel {\n    constructor(params) {\n        super(params);\n    }\n    get indexUpperBound() {\n        return this.board.height - 1;\n    }\n    _generateDisplay(currentIndex) {\n        for (let i = 0; i < this.board.height; i++) {\n            let row;\n            row = this.board.getRowAtIndex(currentIndex + i);\n            this.display[i] = row.slice(0, this.width);\n        }\n    }\n}\n//# sourceMappingURL=vertical-scrolling-panel.js.map","import { SideScrollingPanel } from \"./panels/side-scrolling-panel\";\nimport { VerticalScrollingPanel } from \"./panels/vertical-scrolling-panel\";\nexport var PanelType;\n(function (PanelType) {\n    PanelType[PanelType[\"SideScrollingPanel\"] = 0] = \"SideScrollingPanel\";\n    PanelType[PanelType[\"VerticalScrollingPanel\"] = 1] = \"VerticalScrollingPanel\";\n})(PanelType || (PanelType = {}));\nexport class PanelBuilder {\n    static build(panelType, params) {\n        switch (panelType) {\n            case PanelType.SideScrollingPanel:\n                return new SideScrollingPanel(params);\n            case PanelType.VerticalScrollingPanel:\n                return new VerticalScrollingPanel(params);\n        }\n    }\n}\n//# sourceMappingURL=panel-builder.js.map","import { CanvaRenderer } from \"./canva-renderer\";\nexport var CanvaRenderers;\n(function (CanvaRenderers) {\n    class Ellipse extends CanvaRenderer {\n        constructor(parameters) {\n            super(parameters);\n        }\n        moveToNextBit(ctx, i, j, w, h) {\n            ctx.moveTo(w * (j + 1), h * (i + 1) - h / 2);\n        }\n        drawBit(ctx, i, j, w, h) {\n            const radW = w / 2;\n            const radH = h / 2;\n            ctx.ellipse(w * j + radW, h * i + radH, radW, radH, 0, 0, 2 * Math.PI);\n        }\n    }\n    CanvaRenderers.Ellipse = Ellipse;\n    class Rect extends CanvaRenderer {\n        constructor(parameters) {\n            super(parameters);\n        }\n        drawBit(context, i, j, w, h) {\n            return context.rect(w * j, h * i, w, h);\n        }\n        moveToNextBit(ctx, i, j, w, h) {\n        }\n    }\n    CanvaRenderers.Rect = Rect;\n})(CanvaRenderers || (CanvaRenderers = {}));\n//# sourceMappingURL=canva-renderers.js.map","export class Renderer {\n}\n//# sourceMappingURL=renderer.js.map","import { Renderer } from \"./renderer\";\nexport class AsciiRenderer extends Renderer {\n    constructor(parameters) {\n        super();\n        this._parameters = {\n            element: parameters.element,\n            characterBitOn: parameters.characterBitOn ? parameters.characterBitOn : \"X\",\n            characterBitOff: parameters.characterBitOff ? parameters.characterBitOff : \" \"\n        };\n    }\n    get parameters() {\n        return this._parameters;\n    }\n    render(display) {\n        let output = \"\";\n        for (var i = 0; i < display.length; i++) {\n            for (var j = 0; j < display[i].length; j++) {\n                output += display[i][j] == 1 ?\n                    this._parameters.characterBitOn :\n                    this._parameters.characterBitOff;\n            }\n            output += '\\n';\n        }\n        this._parameters.element.innerHTML = output;\n    }\n}\n//# sourceMappingURL=ascii-renderer.js.map","import { Board } from \"./board\";\nimport { PanelBuilder, PanelType } from \"./panel-builder\";\nimport { AsciiRenderer } from \"./rendering/ascii-renderer\";\nimport { Event } from \"./event\";\nimport { CharacterDictionary } from \"./character-dictionary\";\nimport { CharactersJSON } from \"./character-json\";\nexport class LedMatrix {\n    constructor(params) {\n        this.onReady = new Event();\n        this._params = this._validateParameters(params);\n        this._board = new Board({\n            spacing: this._params.spacing,\n            padding: this._params.padding\n        });\n        this._panelType = this._params.panelType;\n        this._panel = PanelBuilder.build(this._params.panelType, {\n            board: this._board,\n            renderer: this._params.renderer,\n            fps: this._params.fps,\n            increment: this._params.increment,\n            reverse: this._params.reverse,\n            width: this._params.panelWidth\n        });\n        this.event = {\n            panelUpdate: this._panel.PanelUpdate,\n            reachingBoundary: this._panel.ReachingBoundary,\n            ready: this.Ready\n        };\n    }\n    get Ready() { return this.onReady.expose(); }\n    init(size, callback) {\n        CharactersJSON.import(this._params.pathCharacters, size ? size : 1, (characters) => {\n            this._dictionary = new CharacterDictionary();\n            this._dictionary.add(characters);\n            this._board.load(this._board.input != null ? this._board.input : this._params.input, this._dictionary);\n            this._panel.play();\n            this.onReady.trigger();\n            if (callback) {\n                callback();\n            }\n        });\n    }\n    get size() {\n        return this._size;\n    }\n    set size(value) {\n        this._size = value;\n        this.init(value);\n    }\n    get index() {\n        return this._panel.index;\n    }\n    set spacing(value) {\n        this._board.spacing = value;\n        this._panel.board = this._board;\n    }\n    get spacing() {\n        return this._board.spacing;\n    }\n    set padding(value) {\n        this._board.padding = value;\n        this._panel.board = this._board;\n    }\n    get padding() {\n        return this._board.padding;\n    }\n    get width() {\n        return this._board.width;\n    }\n    get height() {\n        return this._board.height;\n    }\n    set input(value) {\n        this._board.load(value, this._dictionary);\n    }\n    get input() {\n        return this._board.input;\n    }\n    play() {\n        this._panel.play();\n    }\n    stop() {\n        this._panel.stop();\n    }\n    pause() {\n        this._panel.pause();\n    }\n    resume() {\n        this._panel.resume();\n    }\n    tick() {\n        this._panel.tick();\n    }\n    seek(frame) {\n        this._panel.seek(frame);\n    }\n    set panelType(value) {\n        this._panelType = value;\n        this._panel.stop();\n        this._panel = PanelBuilder.build(this._panelType, {\n            board: this._board,\n            renderer: this._panel.renderer,\n            fps: this._panel.fps,\n            increment: this._panel.increment,\n            reverse: this._panel.reverse,\n            width: this._panel.width\n        });\n        this._panel.play();\n    }\n    get panelType() {\n        return this._panelType;\n    }\n    set renderer(value) {\n        this._panel.renderer = value;\n    }\n    get renderer() {\n        return this._panel.renderer;\n    }\n    set fps(value) {\n        this._panel.fps = value;\n    }\n    get fps() {\n        return this._panel.fps;\n    }\n    set increment(value) {\n        this._panel.increment = value;\n    }\n    get increment() {\n        return this._panel.increment;\n    }\n    set reverse(value) {\n        this._panel.reverse = value;\n    }\n    get reverse() {\n        return this._panel.reverse;\n    }\n    set viewportWidth(value) {\n        this._panel.width = value;\n    }\n    get viewportWidth() {\n        return this._panel.width;\n    }\n    _validateParameters(params) {\n        const defaultParams = {\n            input: \"Hello World\",\n            pathCharacters: \"alphabet.json\",\n            fps: 30,\n            increment: 1,\n            panelType: PanelType.SideScrollingPanel,\n            renderer: new AsciiRenderer({\n                element: document.getElementById(\"led-matrix\"),\n                characterBitOn: 'X',\n                characterBitOff: ' '\n            }),\n            reverse: false,\n            panelWidth: 80,\n            spacing: 2,\n            padding: [0, 4]\n        };\n        if (params) {\n            params.input = this._valueOrDefault(params.input, defaultParams.input);\n            params.pathCharacters = this._valueOrDefault(params.pathCharacters, defaultParams.pathCharacters);\n            params.spacing = this._valueOrDefault(params.spacing, defaultParams.spacing);\n            params.padding = this._valueOrDefault(params.padding, defaultParams.padding);\n            params.fps = this._valueOrDefault(params.fps, defaultParams.fps);\n            params.increment = this._valueOrDefault(params.increment, defaultParams.increment);\n            params.panelType = this._valueOrDefault(params.panelType, defaultParams.panelType);\n            params.renderer = this._valueOrDefault(params.renderer, defaultParams.renderer);\n            params.reverse = this._valueOrDefault(params.reverse, defaultParams.reverse);\n            params.panelWidth = this._valueOrDefault(params.panelWidth, defaultParams.panelWidth);\n            return params;\n        }\n        return defaultParams;\n    }\n    _valueOrDefault(value, defaultValue) {\n        return value ? value : defaultValue;\n    }\n}\n//# sourceMappingURL=led-matrix.js.map","import { Renderer } from \"./renderer\";\nexport class CanvaRenderer extends Renderer {\n    constructor(parameters) {\n        super();\n        this._parameters = {\n            canva: parameters.canva,\n            colorBitOn: parameters.colorBitOn ? parameters.colorBitOn : \"#00B16A\",\n            colorBitOff: parameters.colorBitOff ? parameters.colorBitOff : \"#22313F\",\n            colorStrokeOn: parameters.colorStrokeOn ? parameters.colorStrokeOn : \"#67809F\",\n            colorStrokeOff: parameters.colorStrokeOff ? parameters.colorStrokeOff : \"#67809F\"\n        };\n    }\n    get parameters() {\n        return this._parameters;\n    }\n    render(display) {\n        const ctx = this._parameters.canva.getContext(\"2d\");\n        ctx.clearRect(0, 0, this._parameters.canva.width, this._parameters.canva.height);\n        const widthEachBit = Math.floor(this._parameters.canva.width / display[0].length);\n        const heightEachBit = Math.floor(this._parameters.canva.height / display.length);\n        ctx.lineWidth = 1;\n        const renderBitsOfValue = (value, fillColor, strokeColor) => {\n            ctx.strokeStyle = strokeColor;\n            ctx.fillStyle = fillColor;\n            ctx.beginPath();\n            for (var i = 0; i < display.length; i++) {\n                for (var j = 0; j < display[i].length; j++) {\n                    if (display[i][j] == value) {\n                        this.moveToNextBit(ctx, i, j, widthEachBit, heightEachBit);\n                        this.drawBit(ctx, i, j, widthEachBit, heightEachBit);\n                    }\n                }\n            }\n            ctx.fill();\n            ctx.stroke();\n        };\n        renderBitsOfValue(0, this._parameters.colorBitOff, this._parameters.colorStrokeOff);\n        renderBitsOfValue(1, this._parameters.colorBitOn, this._parameters.colorStrokeOn);\n    }\n}\n//# sourceMappingURL=canva-renderer.js.map"],"sourceRoot":""}